import{C as P}from"./CommonHeader-a8bbfa0e.js";import{g as V}from"./order-83b1c9ec.js";import{d as B,j as N,c as d,m as a,w as f,a as c,g as r,o as l,F as g,b as m,t as u,f as w,A as I,_ as O}from"./index-6ebd5fd7.js";const S={class:"order"},T={class:"content"},$=["onClick"],L={class:"order-item-header"},U=B({__name:"index",setup(D){const e=N({list:[],active:"",refreshing:!1,loading:!1,finished:!1,page:1,totalPage:0}),v=n=>{I.push({path:"/order-detail",query:{orderNo:n}})},h=()=>{_()},_=()=>{e.refreshing=!0,e.finished=!1,e.loading=!0,e.page=1,p()},p=()=>{!e.refreshing&&e.page<e.totalPage&&(e.page=e.page+1),e.refreshing&&(e.list=[],e.refreshing=!1),b()},b=async()=>{const{data:{data:n}}=await V(e.page,e.active);e.list=e.list.concat(n.list),e.totalPage=n.totalPage,e.loading=!1,e.page>=n.totalPage&&(e.finished=!0)};return(n,s)=>{const o=r("van-tab"),C=r("van-tabs"),x=r("van-card"),k=r("van-list"),y=r("van-pull-refresh");return l(),d("div",S,[a(P,{title:"我的订单"}),a(C,{active:e.active,"onUpdate:active":s[0]||(s[0]=t=>e.active=t),color:"#1baeae","title-active-color":"#1baeae",onClickTab:h},{default:f(()=>[a(o,{title:"全部",name:""}),a(o,{title:"待付款",name:"0"}),a(o,{title:"待确认",name:"1"}),a(o,{title:"待发货",name:"2"}),a(o,{title:"已发货",name:"3"}),a(o,{title:"交易完成",name:"4"})]),_:1},8,["active"]),c("div",T,[a(y,{modelValue:e.refreshing,"onUpdate:modelValue":s[2]||(s[2]=t=>e.refreshing=t),onRefresh:_,class:"order-list"},{default:f(()=>[a(k,{loading:e.loading,"onUpdate:loading":s[1]||(s[1]=t=>e.loading=t),finished:e.finished,"finished-text":"没有更多了",onLoad:p,onOffset:t=>10},{default:f(()=>[(l(!0),d(g,null,m(e.list,t=>(l(),d("div",{class:"order-item",key:t.orderId,onClick:i=>v(t.orderNo)},[c("div",L,[c("span",null,"订单时间："+u(t.createTime),1),c("span",null,u(t.orderStatusString),1)]),(l(!0),d(g,null,m(t.newBeeMallOrderItemVOS,i=>(l(),w(x,{num:i.goodsCount,price:`${i.sellingPrice}.00`,desc:"全场包邮",title:i.goodsName,thumb:n.$filters.prefix(i.goodsCoverImg)},null,8,["num","price","title","thumb"]))),256))],8,$))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])])])}}});const A=O(U,[["__scopeId","data-v-7912f473"]]);export{A as default};
