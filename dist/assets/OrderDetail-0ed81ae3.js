import{C as O}from"./CommonHeader-a8bbfa0e.js";import{c as N,a as P,p as T}from"./order-83b1c9ec.js";import{Q as b,R as x,S as I,T as $,m as p,U as V,V as U,d as F,j as L,k as M,c as g,a as e,t as _,f,w as l,I as h,F as R,b as q,P as w,B as A,D as E,g as v,o as i,e as u,u as H,p as W,q as j,N as Q,s as z,_ as G}from"./index-6ebd5fd7.js";let y;const J={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let K=b({},J);function X(){({instance:y}=I({setup(){const{state:c,toggle:r}=$();return()=>p(U,V(c,{"onUpdate:show":r}),null)}}))}function Y(a){return x?new Promise((c,r)=>{y||X(),y.open(b({},K,a,{callback:t=>{(t==="confirm"?c:r)(t)}}))}):Promise.resolve()}const Z=a=>Y(b({showCancelButton:!0},a)),m=a=>(W("data-v-31100be3"),a=a(),j(),a),ee={class:"order-detail"},te={class:"status"},oe={class:"status-item"},se=m(()=>e("span",null,"订单状态：",-1)),ae={class:"status-item"},re=m(()=>e("span",null,"订单编号：",-1)),ne={class:"status-item"},le=m(()=>e("span",null,"下单时间：",-1)),ie={class:"others"},ce={class:"status-item"},de=m(()=>e("span",null,"商品金额：",-1)),ue=m(()=>e("div",{class:"status-item"},[e("span",null,"配送方式："),e("span",null,"普通快递")],-1)),pe={class:"good-list"},me={style:{width:"90%",margin:"0 auto",padding:"50px 0"}},_e=F({__name:"OrderDetail",setup(a){const c=Q(),r=z(),t=L({orderDetail:{createTime:"",newBeeMallOrderItemVOS:[],orderNo:"",orderStatus:2,orderStatusString:"",payStatus:0,payTime:"",payType:0,payTypeString:"",totalPrice:0},showPay:!1}),k=n=>{Z({title:"确定取消订单？",theme:"round-button",confirmButtonColor:"linear-gradient(to right, #0dc3c3, #098888)"}).then(()=>{N(n).then(o=>{o.data.resultCode===200&&(w("删除成功"),r.replace("/order"))})}).catch(()=>{})},C=async n=>{await T(t.orderDetail.orderNo,n),w("支付成功！"),setTimeout(()=>{r.push("/order")},2e3)},D=async()=>{A({message:"加载中...",forbidClick:!0});const n=c.query.orderNo,{data:{data:o}}=await P(n);t.orderDetail=o,E()};return M(()=>{D()}),(n,o)=>{const d=v("van-button"),S=v("van-card"),B=v("van-popup");return i(),g("div",ee,[p(O,{title:"订单详情"}),e("div",te,[e("div",oe,[se,e("span",null,_(t.orderDetail.orderStatusString),1)]),e("div",ae,[re,e("span",null,_(t.orderDetail.orderNo),1)]),e("div",ne,[le,e("span",null,_(t.orderDetail.createTime),1)]),t.orderDetail.orderStatus===3?(i(),f(d,{key:0,block:"",class:"btn",color:"#1baeae"},{default:l(()=>[u("确认收货")]),_:1})):h("",!0),t.orderDetail.orderStatus===0?(i(),f(d,{key:1,block:"",class:"btn",color:"#1baeae",onClick:o[0]||(o[0]=s=>t.showPay=!0)},{default:l(()=>[u("去支付")]),_:1})):h("",!0),t.orderDetail.orderStatus<0||t.orderDetail.orderStatus===4?h("",!0):(i(),f(d,{key:2,block:"",class:"btn",onClick:o[1]||(o[1]=s=>k(t.orderDetail.orderNo))},{default:l(()=>[u("取消订单")]),_:1}))]),e("div",ie,[e("div",ce,[de,e("span",null,_(t.orderDetail.totalPrice),1)]),ue]),e("div",pe,[(i(!0),g(R,null,q(t.orderDetail.newBeeMallOrderItemVOS,s=>(i(),f(S,{num:s.goodsCount,price:`${s.sellingPrice}.00`,desc:"全场包邮",title:s.goodsName,thumb:n.$filters.prefix(s.goodsCoverImg),onClick:fe=>H(r).push(`/info/${s.goodsId}`)},null,8,["num","price","title","thumb","onClick"]))),256))]),p(B,{closeable:"",show:t.showPay,"onUpdate:show":o[4]||(o[4]=s=>t.showPay=s),position:"bottom",style:{height:"30%"},"close-on-click-overlay":""},{default:l(()=>[e("div",me,[p(d,{style:{marginBottom:"10px"},color:"#1989fa",block:"",onClick:o[2]||(o[2]=s=>C(1))},{default:l(()=>[u("支付宝支付")]),_:1}),p(d,{color:"#4fc08d",block:"",onClick:o[3]||(o[3]=s=>C(2))},{default:l(()=>[u("微信支付")]),_:1})])]),_:1},8,["show"])])}}});const be=G(_e,[["__scopeId","data-v-31100be3"]]);export{be as default};
